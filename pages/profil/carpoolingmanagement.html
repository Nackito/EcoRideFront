<div class="container mt-4 mb-5 carpooling-management mobile-friendly">
  <!-- Header avec bouton retour -->
  <div class="d-flex align-items-center mb-3 mb-md-4">
    <a href="/account" class="text-decoration-none text-dark me-3">
      <i class="bi bi-arrow-left fs-4"></i>
    </a>
    <a href="/account" class="text-decoration-none text-dark">
      <h4 class="mb-0 fs-5 fw-bold text-primary d-block d-md-none">
        Covoiturage
      </h4>
      <h2 class="mb-0 fs-3 fw-bold text-primary d-none d-md-block">
        Gestion de covoiturage
      </h2>
    </a>
  </div>

  <!-- Actions rapides -->
  <div class="row g-3 mb-4">
    <div class="col-12 col-md-6">
      <button class="btn p-0 w-100 h-100 border-0" onclick="startNewTrip()">
        <div class="card h-100 action-card">
          <div class="card-body p-3 p-md-4 text-center">
            <i class="bi bi-plus-circle-fill fs-1 text-success mb-3"></i>
            <h5 class="fw-bold mb-2">Démarrer un trajet</h5>
            <p class="text-muted small mb-0">
              Créer un nouveau covoiturage et inviter des passagers
            </p>
          </div>
        </div>
      </button>
    </div>
    <div class="col-12 col-md-6">
      <button class="btn p-0 w-100 h-100 border-0" onclick="viewActiveTrips()">
        <div class="card h-100 action-card">
          <div class="card-body p-3 p-md-4 text-center">
            <i class="bi bi-car-front-fill fs-1 text-primary mb-3"></i>
            <h5 class="fw-bold mb-2">Trajets actifs</h5>
            <p class="text-muted small mb-0">
              Gérer vos trajets en cours ou à venir
            </p>
          </div>
        </div>
      </button>
    </div>
  </div>

  <!-- Trajets actifs/à venir -->
  <div class="card rounded-4 elevation-2 mb-4">
    <div class="card-body p-2 p-md-4">
      <h5 class="fw-bold mb-3">
        <i class="bi bi-clock me-2 text-warning"></i>Trajets en cours
      </h5>

      <div id="activeTrips">
        <!-- Trajet actif en tant que conducteur -->
        <div class="card bg-light border-0 mb-3" data-trip-id="active-1">
          <div class="card-body p-2 p-md-3">
            <!-- Version mobile -->
            <div class="d-block d-md-none">
              <div
                class="d-flex justify-content-between align-items-start mb-2"
              >
                <div class="flex-grow-1">
                  <div class="d-flex align-items-center mb-1">
                    <small class="fw-bold">Lyon</small>
                    <i class="bi bi-arrow-right mx-1 text-muted"></i>
                    <small class="fw-bold">Toulouse</small>
                  </div>
                  <small class="text-muted">Aujourd'hui • 16h00</small>
                </div>
                <span class="badge bg-warning text-dark ms-2">En attente</span>
              </div>
              <div
                class="d-flex justify-content-between align-items-center mb-2"
              >
                <div class="d-flex align-items-center">
                  <i class="bi bi-person-driving text-primary me-1"></i>
                  <small>Conducteur • 2/3 places</small>
                </div>
                <small class="fw-bold text-primary">€35</small>
              </div>
              <div class="d-flex gap-2">
                <button
                  class="btn btn-success btn-sm flex-fill"
                  onclick="startTrip('active-1')"
                >
                  <i class="bi bi-play-circle me-1"></i>Démarrer
                </button>
                <button
                  class="btn btn-outline-danger btn-sm flex-fill"
                  onclick="cancelTrip('active-1')"
                >
                  <i class="bi bi-x-circle me-1"></i>Annuler
                </button>
              </div>
            </div>

            <!-- Version desktop -->
            <div class="d-none d-md-block">
              <div class="row align-items-center">
                <div class="col-md-1 text-center">
                  <i class="bi bi-person-driving fs-3 text-primary"></i>
                </div>
                <div class="col-md-4">
                  <h6 class="fw-bold mb-1">Lyon → Toulouse</h6>
                  <p class="text-muted small mb-0">Aujourd'hui • 16h00</p>
                </div>
                <div class="col-md-2 text-center">
                  <small class="text-muted">2/3 places</small>
                </div>
                <div class="col-md-2 text-center">
                  <span class="badge bg-warning text-dark">En attente</span>
                </div>
                <div class="col-md-1 text-center">
                  <span class="fw-bold text-primary">€35</span>
                </div>
                <div class="col-md-2 text-center">
                  <div class="d-flex gap-1">
                    <button
                      class="btn btn-success btn-sm"
                      onclick="startTrip('active-1')"
                      title="Démarrer le trajet"
                    >
                      <i class="bi bi-play-circle"></i>
                    </button>
                    <button
                      class="btn btn-outline-danger btn-sm"
                      onclick="cancelTrip('active-1')"
                      title="Annuler le trajet"
                    >
                      <i class="bi bi-x-circle"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Trajet en cours (démarré) -->
        <div
          class="card bg-success bg-opacity-10 border-success mb-3"
          data-trip-id="active-2"
        >
          <div class="card-body p-2 p-md-3">
            <!-- Version mobile -->
            <div class="d-block d-md-none">
              <div
                class="d-flex justify-content-between align-items-start mb-2"
              >
                <div class="flex-grow-1">
                  <div class="d-flex align-items-center mb-1">
                    <small class="fw-bold">Paris</small>
                    <i class="bi bi-arrow-right mx-1 text-muted"></i>
                    <small class="fw-bold">Orléans</small>
                  </div>
                  <small class="text-muted">En cours • Départ 14h30</small>
                </div>
                <span class="badge bg-success ms-2">En cours</span>
              </div>
              <div
                class="d-flex justify-content-between align-items-center mb-2"
              >
                <div class="d-flex align-items-center">
                  <i class="bi bi-person-sitting text-secondary me-1"></i>
                  <small>Passager • avec Thomas M.</small>
                </div>
                <small class="fw-bold text-danger">-€12</small>
              </div>
              <div class="d-flex gap-2">
                <button
                  class="btn btn-info btn-sm flex-fill"
                  onclick="viewTripProgress('active-2')"
                >
                  <i class="bi bi-geo-alt me-1"></i>Localisation
                </button>
                <button
                  class="btn btn-outline-primary btn-sm flex-fill"
                  onclick="contactDriver('active-2')"
                >
                  <i class="bi bi-chat me-1"></i>Contact
                </button>
              </div>
            </div>

            <!-- Version desktop -->
            <div class="d-none d-md-block">
              <div class="row align-items-center">
                <div class="col-md-1 text-center">
                  <i class="bi bi-person-sitting fs-3 text-secondary"></i>
                </div>
                <div class="col-md-4">
                  <h6 class="fw-bold mb-1">Paris → Orléans</h6>
                  <p class="text-muted small mb-0">En cours • Départ 14h30</p>
                </div>
                <div class="col-md-2 text-center">
                  <small class="text-muted">avec Thomas M.</small>
                </div>
                <div class="col-md-2 text-center">
                  <span class="badge bg-success">En cours</span>
                </div>
                <div class="col-md-1 text-center">
                  <span class="fw-bold text-danger">-€12</span>
                </div>
                <div class="col-md-2 text-center">
                  <div class="d-flex gap-1">
                    <button
                      class="btn btn-info btn-sm"
                      onclick="viewTripProgress('active-2')"
                      title="Voir la progression"
                    >
                      <i class="bi bi-geo-alt"></i>
                    </button>
                    <button
                      class="btn btn-outline-primary btn-sm"
                      onclick="contactDriver('active-2')"
                      title="Contacter"
                    >
                      <i class="bi bi-chat"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Trajet à venir -->
        <div class="card bg-light border-0 mb-3" data-trip-id="upcoming-1">
          <div class="card-body p-2 p-md-3">
            <!-- Version mobile -->
            <div class="d-block d-md-none">
              <div
                class="d-flex justify-content-between align-items-start mb-2"
              >
                <div class="flex-grow-1">
                  <div class="d-flex align-items-center mb-1">
                    <small class="fw-bold">Marseille</small>
                    <i class="bi bi-arrow-right mx-1 text-muted"></i>
                    <small class="fw-bold">Nice</small>
                  </div>
                  <small class="text-muted">Demain • 09h00</small>
                </div>
                <span class="badge bg-primary ms-2">Programmé</span>
              </div>
              <div
                class="d-flex justify-content-between align-items-center mb-2"
              >
                <div class="d-flex align-items-center">
                  <i class="bi bi-person-driving text-primary me-1"></i>
                  <small>Conducteur • 1/2 places</small>
                </div>
                <small class="fw-bold text-primary">€25</small>
              </div>
              <div class="d-flex gap-2">
                <button
                  class="btn btn-outline-secondary btn-sm flex-fill"
                  onclick="editTrip('upcoming-1')"
                >
                  <i class="bi bi-pencil me-1"></i>Modifier
                </button>
                <button
                  class="btn btn-outline-danger btn-sm flex-fill"
                  onclick="cancelTrip('upcoming-1')"
                >
                  <i class="bi bi-x-circle me-1"></i>Annuler
                </button>
              </div>
            </div>

            <!-- Version desktop -->
            <div class="d-none d-md-block">
              <div class="row align-items-center">
                <div class="col-md-1 text-center">
                  <i class="bi bi-person-driving fs-3 text-primary"></i>
                </div>
                <div class="col-md-4">
                  <h6 class="fw-bold mb-1">Marseille → Nice</h6>
                  <p class="text-muted small mb-0">Demain • 09h00</p>
                </div>
                <div class="col-md-2 text-center">
                  <small class="text-muted">1/2 places</small>
                </div>
                <div class="col-md-2 text-center">
                  <span class="badge bg-primary">Programmé</span>
                </div>
                <div class="col-md-1 text-center">
                  <span class="fw-bold text-primary">€25</span>
                </div>
                <div class="col-md-2 text-center">
                  <div class="d-flex gap-1">
                    <button
                      class="btn btn-outline-secondary btn-sm"
                      onclick="editTrip('upcoming-1')"
                      title="Modifier"
                    >
                      <i class="bi bi-pencil"></i>
                    </button>
                    <button
                      class="btn btn-outline-danger btn-sm"
                      onclick="cancelTrip('upcoming-1')"
                      title="Annuler"
                    >
                      <i class="bi bi-x-circle"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Message si aucun trajet actif -->
      <div id="noActiveTrips" class="text-center py-4 d-none">
        <i class="bi bi-calendar-x fs-1 text-muted mb-3"></i>
        <h6 class="text-muted">Aucun trajet actif</h6>
        <p class="text-muted small">
          <a href="/offer-seats" class="text-decoration-none"
            >Créez un nouveau trajet</a
          >
          pour commencer
        </p>
      </div>
    </div>
  </div>

  <!-- Statistiques rapides -->
  <div class="card rounded-4 elevation-2 mb-4">
    <div class="card-body p-2 p-md-4">
      <h5 class="fw-bold mb-3">
        <i class="bi bi-graph-up me-2 text-info"></i>Aujourd'hui
      </h5>

      <!-- Version mobile -->
      <div class="d-block d-md-none">
        <div class="row text-center g-2">
          <div class="col-4">
            <div class="p-2 bg-primary bg-opacity-10 rounded-2">
              <div class="fw-bold">2</div>
              <small class="text-muted">Trajets</small>
            </div>
          </div>
          <div class="col-4">
            <div class="p-2 bg-success bg-opacity-10 rounded-2">
              <div class="fw-bold">3</div>
              <small class="text-muted">Passagers</small>
            </div>
          </div>
          <div class="col-4">
            <div class="p-2 bg-warning bg-opacity-10 rounded-2">
              <div class="fw-bold">€23</div>
              <small class="text-muted">Revenus</small>
            </div>
          </div>
        </div>
      </div>

      <!-- Version desktop -->
      <div class="d-none d-md-block">
        <div class="row text-center">
          <div class="col-md-3">
            <div class="p-3 bg-primary bg-opacity-10 rounded-3">
              <i class="bi bi-car-front fs-2 text-primary mb-2"></i>
              <h5 class="fw-bold">2</h5>
              <p class="text-muted small mb-0">Trajets aujourd'hui</p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="p-3 bg-success bg-opacity-10 rounded-3">
              <i class="bi bi-people fs-2 text-success mb-2"></i>
              <h5 class="fw-bold">3</h5>
              <p class="text-muted small mb-0">Passagers transportés</p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="p-3 bg-warning bg-opacity-10 rounded-3">
              <i class="bi bi-currency-euro fs-2 text-warning mb-2"></i>
              <h5 class="fw-bold">€23</h5>
              <p class="text-muted small mb-0">Revenus du jour</p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="p-3 bg-info bg-opacity-10 rounded-3">
              <i class="bi bi-speedometer2 fs-2 text-info mb-2"></i>
              <h5 class="fw-bold">145km</h5>
              <p class="text-muted small mb-0">Distance parcourue</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de confirmation d'annulation -->
<div
  class="modal fade"
  id="cancelModal"
  tabindex="-1"
  aria-labelledby="cancelModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-4">
      <div class="modal-header border-0 pb-0">
        <h5 class="modal-title fw-bold text-danger" id="cancelModalLabel">
          Annuler le trajet
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body p-4">
        <div class="alert alert-warning">
          <i class="bi bi-exclamation-triangle me-2"></i>
          <strong>Attention !</strong> Cette action ne peut pas être annulée.
        </div>
        <p>Êtes-vous sûr de vouloir annuler ce trajet ?</p>
        <div id="tripDetails" class="bg-light p-3 rounded-3 mb-3">
          <!-- Les détails du trajet seront insérés ici -->
        </div>
        <div class="form-group">
          <label for="cancelReason" class="form-label fw-semibold"
            >Raison de l'annulation (optionnel)</label
          >
          <textarea
            class="form-control"
            id="cancelReason"
            rows="3"
            placeholder="Expliquez brièvement pourquoi vous annulez ce trajet..."
          ></textarea>
          <small class="text-muted"
            >Cette information sera partagée avec les passagers
            concernés.</small
          >
        </div>
      </div>
      <div class="modal-footer border-0 pt-0">
        <button
          type="button"
          class="btn btn-outline-secondary"
          data-bs-dismiss="modal"
        >
          Garder le trajet
        </button>
        <button
          type="button"
          class="btn btn-danger"
          onclick="confirmCancelTrip()"
        >
          <i class="bi bi-x-circle me-2"></i>Confirmer l'annulation
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal de confirmation de démarrage -->
<div
  class="modal fade"
  id="startModal"
  tabindex="-1"
  aria-labelledby="startModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-4">
      <div class="modal-header border-0 pb-0">
        <h5 class="modal-title fw-bold text-success" id="startModalLabel">
          Démarrer le trajet
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body p-4">
        <div class="alert alert-info">
          <i class="bi bi-info-circle me-2"></i>
          Vous êtes sur le point de démarrer votre trajet.
        </div>
        <p>
          Confirmez que vous êtes prêt à partir et que tous vos passagers sont à
          bord.
        </p>
        <div id="startTripDetails" class="bg-light p-3 rounded-3 mb-3">
          <!-- Les détails du trajet seront insérés ici -->
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            id="confirmReady"
            required
          />
          <label class="form-check-label" for="confirmReady">
            Je confirme que tous les passagers sont à bord et que je suis prêt à
            partir
          </label>
        </div>
      </div>
      <div class="modal-footer border-0 pt-0">
        <button
          type="button"
          class="btn btn-outline-secondary"
          data-bs-dismiss="modal"
        >
          Annuler
        </button>
        <button
          type="button"
          class="btn btn-success"
          onclick="confirmStartTrip()"
        >
          <i class="bi bi-play-circle me-2"></i>Démarrer maintenant
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  // Variables globales
  let currentTripId = null;
  let currentAction = null;

  // Données de démonstration
  const trips = {
    "active-1": {
      from: "Lyon",
      to: "Toulouse",
      date: "Aujourd'hui",
      time: "16h00",
      passengers: 2,
      maxPassengers: 3,
      price: 35,
      status: "waiting",
    },
    "active-2": {
      from: "Paris",
      to: "Orléans",
      date: "En cours",
      time: "Départ 14h30",
      driver: "Thomas M.",
      price: -12,
      status: "ongoing",
    },
    "upcoming-1": {
      from: "Marseille",
      to: "Nice",
      date: "Demain",
      time: "09h00",
      passengers: 1,
      maxPassengers: 2,
      price: 25,
      status: "scheduled",
    },
  };

  // Initialisation
  document.addEventListener("DOMContentLoaded", function () {
    // Vérifier s'il y a des trajets actifs
    checkActiveTrips();
  });

  // Vérifier les trajets actifs
  function checkActiveTrips() {
    const activeTripsContainer = document.getElementById("activeTrips");
    const noActiveTripsMessage = document.getElementById("noActiveTrips");

    if (activeTripsContainer.children.length === 0) {
      noActiveTripsMessage.classList.remove("d-none");
      activeTripsContainer.classList.add("d-none");
    } else {
      noActiveTripsMessage.classList.add("d-none");
      activeTripsContainer.classList.remove("d-none");
    }
  }

  // Démarrer un nouveau trajet
  function startNewTrip() {
    window.location.href = "/offer-seats";
  }

  // Voir les trajets actifs
  function viewActiveTrips() {
    window.location.href = "/carpooling-history";
  }

  // Démarrer un trajet
  function startTrip(tripId) {
    currentTripId = tripId;
    currentAction = "start";

    const trip = trips[tripId];
    if (trip) {
      document.getElementById("startTripDetails").innerHTML = `
        <h6 class="fw-bold mb-2">${trip.from} → ${trip.to}</h6>
        <p class="mb-1"><strong>Départ :</strong> ${trip.date} à ${trip.time}</p>
        <p class="mb-1"><strong>Passagers :</strong> ${trip.passengers}/${trip.maxPassengers} places occupées</p>
        <p class="mb-0"><strong>Revenus prévus :</strong> €${trip.price}</p>
      `;
    }

    const modal = new bootstrap.Modal(document.getElementById("startModal"));
    modal.show();
  }

  // Confirmer le démarrage du trajet
  function confirmStartTrip() {
    const confirmCheckbox = document.getElementById("confirmReady");

    if (!confirmCheckbox.checked) {
      alert("Veuillez confirmer que vous êtes prêt à partir.");
      return;
    }

    if (currentTripId) {
      // Mettre à jour le statut du trajet
      const tripElement = document.querySelector(
        `[data-trip-id="${currentTripId}"]`
      );
      if (tripElement) {
        // Changer le style et le contenu pour indiquer que le trajet est en cours
        tripElement.classList.remove("bg-light");
        tripElement.classList.add(
          "bg-success",
          "bg-opacity-10",
          "border-success"
        );

        // Mettre à jour les badges et boutons
        const badges = tripElement.querySelectorAll(".badge");
        badges.forEach((badge) => {
          badge.className = "badge bg-success ms-2";
          badge.textContent = "En cours";
        });

        // Mettre à jour les boutons (version mobile)
        const mobileButtons = tripElement.querySelector(
          ".d-block.d-md-none .d-flex.gap-2"
        );
        if (mobileButtons) {
          mobileButtons.innerHTML = `
            <button class="btn btn-info btn-sm flex-fill" onclick="viewTripProgress('${currentTripId}')">
              <i class="bi bi-geo-alt me-1"></i>Localisation
            </button>
            <button class="btn btn-outline-danger btn-sm flex-fill" onclick="finishTrip('${currentTripId}')">
              <i class="bi bi-check-circle me-1"></i>Terminer
            </button>
          `;
        }

        // Mettre à jour les boutons (version desktop)
        const desktopButtons = tripElement.querySelector(
          ".d-none.d-md-block .d-flex.gap-1"
        );
        if (desktopButtons) {
          desktopButtons.innerHTML = `
            <button class="btn btn-info btn-sm" onclick="viewTripProgress('${currentTripId}')" title="Voir la progression">
              <i class="bi bi-geo-alt"></i>
            </button>
            <button class="btn btn-outline-danger btn-sm" onclick="finishTrip('${currentTripId}')" title="Terminer le trajet">
              <i class="bi bi-check-circle"></i>
            </button>
          `;
        }
      }

      showToast("Trajet démarré avec succès ! Bon voyage !", "success");

      // Fermer le modal
      const modal = bootstrap.Modal.getInstance(
        document.getElementById("startModal")
      );
      modal.hide();

      currentTripId = null;
      currentAction = null;
    }
  }

  // Annuler un trajet
  function cancelTrip(tripId) {
    currentTripId = tripId;
    currentAction = "cancel";

    const trip = trips[tripId];
    if (trip) {
      document.getElementById("tripDetails").innerHTML = `
        <h6 class="fw-bold mb-2">${trip.from} → ${trip.to}</h6>
        <p class="mb-1"><strong>Date :</strong> ${trip.date} à ${trip.time}</p>
        <p class="mb-0"><strong>Passagers concernés :</strong> ${
          trip.passengers || 0
        } personne(s)</p>
      `;
    }

    const modal = new bootstrap.Modal(document.getElementById("cancelModal"));
    modal.show();
  }

  // Confirmer l'annulation
  function confirmCancelTrip() {
    if (currentTripId) {
      // Supprimer l'élément du DOM
      const tripElement = document.querySelector(
        `[data-trip-id="${currentTripId}"]`
      );
      if (tripElement) {
        tripElement.remove();
      }

      // Supprimer des données
      delete trips[currentTripId];

      showToast("Trajet annulé avec succès", "warning");

      // Vérifier s'il reste des trajets actifs
      checkActiveTrips();

      // Fermer le modal
      const modal = bootstrap.Modal.getInstance(
        document.getElementById("cancelModal")
      );
      modal.hide();

      currentTripId = null;
      currentAction = null;
    }
  }

  // Voir la progression du trajet
  function viewTripProgress(tripId) {
    console.log("Voir progression du trajet:", tripId);
    // Ici vous pouvez ouvrir une carte ou une page de suivi
    showToast("Ouverture de la carte de suivi...", "info");
  }

  // Contacter le conducteur/passager
  function contactDriver(tripId) {
    console.log("Contacter pour le trajet:", tripId);
    // Ici vous pouvez ouvrir un chat ou composer un numéro
    showToast("Ouverture du chat...", "info");
  }

  // Modifier un trajet
  function editTrip(tripId) {
    console.log("Modifier le trajet:", tripId);
    window.location.href = `/edit-trip?id=${tripId}`;
  }

  // Terminer un trajet
  function finishTrip(tripId) {
    if (confirm("Confirmez-vous que le trajet est terminé ?")) {
      const tripElement = document.querySelector(`[data-trip-id="${tripId}"]`);
      if (tripElement) {
        tripElement.remove();
      }

      showToast(
        "Trajet terminé avec succès ! Merci pour votre service.",
        "success"
      );
      checkActiveTrips();
    }
  }

  // Afficher un toast (notification)
  function showToast(message, type = "info") {
    const toast = document.createElement("div");

    // Déterminer la classe d'alerte selon le type
    let alertClass;
    if (type === "success") {
      alertClass = "alert-success";
    } else if (type === "warning") {
      alertClass = "alert-warning";
    } else if (type === "error") {
      alertClass = "alert-danger";
    } else {
      alertClass = "alert-info";
    }

    toast.className = `alert ${alertClass} position-fixed top-0 start-50 translate-middle-x mt-3`;
    toast.style.zIndex = "9999";
    toast.textContent = message;

    document.body.appendChild(toast);

    setTimeout(() => {
      toast.remove();
    }, 4000);
  }
</script>
